# Change Fonts

Sections in this topic:  
* [Basics](#Basics)
  * [Standard 14 fonts](#standard-14-fonts)
  * [Default font](#default-font)
* [Change the document font](#change-the-document-font)
* [Use a custom font](#use-a-custom-font)
* [Where to find a font for a certain language](#where-to-find-a-font-for-a-certain-language)
* [How to convert .ttf file to a base64 string](#how-to-convert-a-ttf-file-to-a-base64-string)


**API to use:**  
_Switch fonts:_  
`DocOptions.fontName`  
_Load fonts:_  
`DocController.addFont()`  
_Load fonts (OBSOLETTE):_  
`DocOptions.base64Normal`  
`DocOptions.base64Bold` 


***
## Basics

The **SurveyJS PDF Export** library uses a third-party [jsPDF](https://github.com/MrRio/jsPDF) library to render surveys as PDF files. 

### Standard 14 fonts

PDF documents rendered by jsPDF support the following fonts out of the box:

- **Courier**  
typefaces: "normal", "bold", "oblique", and "bold oblique"

- **Helvetica**  
typefaces: "normal", "bold", "oblique", and "bold oblique"

- **Times**  
typefaces: "normal", "bold", "oblique", and "bold oblique"

- **Symbol**  

- **ZapfDingbats**  

The first three fonts have four typefaces each: "**normal**", "**bold**", "**oblique**" and "**bold oblique**". This results in a final set of fonts known as the [standard (or base) 14 PDF fonts](https://en.wikipedia.org/wiki/PDF#:~:text=Fourteen%20typefaces%2C%20known%20as%20the,oblique%2C%20bold%20and%20bold%20oblique).

For more details, see **jsPDF** [sources](https://github.com/MrRio/jsPDF/blob/cef97fb34eda41a8704c9f3983e680919a328ce4/src/jspdf.js#L793-L808).

>**Note:**  
The standard 14 PDF fonts only provide a limited set of glyphs but have the advantage that they don't need to be embedded into a document. These fonts are intended to be installed on a client machine and all PDF reading/viewing applications need to support them. 

### Default font

In addition to the standard 14 fonts, a PDF document generated by the **SurveyJS PDF Export** library might by default contain one more font with two typefaces:

- **Segoe**  
typefaces: "normal" and "bold"

See **SurveyPdf** [sources](https://github.com/surveyjs/survey-pdf/blob/master/src/fonts.ts) for more details.  

Segoe is the SurveyPDF's default font. Two typefaces of this font are by default embedded in a generated PDF document and are used to represent all survey texts within the document. 

<!-- 
If you want to use one of the above fonts, then you can set it as the [Set font name]() section describes (using the option's fontName property) without taking any additional actions. 
Otherwise, follow the steps in this tutorial.

If you want to include custom fonts to match your brand or style guide, then you're going to need to take a few extra steps. 
 -->



## Change the document font

Use the `options.fontName` property to specify a document's font.

If you want to switch from the default Segoe font to one of the standard 14 fonts, set the `options.fontName` property to the desired font's family name.  
You don't need to explicitly specify typefaces (such as "normal" or "bold"). SurveyPDF automatically finds and applies required font variations (if they are available within a document).

For instance, to render a PDF document using the Courier font family, set `options.fontName` to "Courier".

```js
function saveSurveyToPdf(filename, surveyModel) {
    var options = {
        // ...
        fontName: 'Courier',
    };
    var surveyPDF = new SurveyPDF.SurveyPDF(json, options);
    surveyPDF.data = surveyModel.data;
    surveyPDF.save(filename);
}
```

Specifying any other font instead of Segoe through the `fontName` property prevents embedding Segoe fonts into a PDF document and makes Segoe typefaces unavailable within the document.

<!-- 
>**Note:**  
If you explicitly specify any other font instead of Segoe to render a PDF document (you can, for instance, use one from the standard 14 PDF fonts or embed a custom font), the Segoe fonts are not added to the document. -->

<!-- 
If font with exact given style and weight properties is not found, then the closest registered font will be used.

--


To use a custom font you need to set fontName parameter to string with custom font name. You may use this font name in SurveyPDF callbacks later

The font name is used as a key so any duplicate font names will override previous settings.

method setFont() - ? no 
-->


## Use a custom font

Along with the use of the standard 14 fonts, the **SurveyJS PDF Export** library also allows you to integrate custom fonts into a PDF document and use them to render survey texts. 

Custom fonts are typically useful when there is a need for specific (UTF-8 encoded) glyphs which are absent in standard (ASCII-encoded) 14 fonts.

For instance, if you want to have Chinese text in your survey's PDF file, your font needs to have the necessary Chinese glyphs.

To use a custom font within a SurveyPDF document, perform the following steps:

* **Add a custom font** through the `DocController.addFont()` static method.
* **Set the document font** through the `options.fontName` property.

### Add a custom font
Use the `addFont()` method to add a custom font to a PDF document.

* [addFont()]()  
`addFont(fontName: string, base64: string, fontStyle: string)`  

This method does the following:  

* Loads a font face as a base64-encoded string.
* Specifies the font variation (such as "normal" or "bold") for which to use the loaded font face in a document.
* Gives the loaded font face a label (a custom font family name/alias) which uniquely identifies the custom font through all fonts available within a document. Use this label to set the `fontName` property.

<!-- 
This method loads a font face as a base64-encoded string and associates it with a specified font family name and font style (like "normal" or "bold"). -->

A typical method call:
```js
SurveyPDF.DocController.addFont("myFont", "<<base64-encoded string>>", "normal");
```

Method parameters:

* _fontName_  
A dynamically created label to assign to the loaded custom font. This label serves as a custom font family name. Example: "myFont".

* _base64_  
 A base64-encoded string that represents the content of a custom font's ttf-file to embed.

* _fontStyle_  
A font variation for which to use the loaded custom font when rendering a PDF document. Might represent a combination of the font weight and font style. Possible values: "normal", "bold", "italic", "bolditalic".  
SurveyPDF typically uses two font variations for survey element texts: "bold" is used for texts of titles, "normal" - for texts of other elements.  
You might, however, have a need to use additional font variations within a custom HTML content you provide for questions of the Html type ([QuestionHtmlModel](https://surveyjs.io/Documentation/Library?id=questionhtmlmodel)).


The sample code below demonstrates how to use the `addFont` method to add two custom font faces (for "normal" and "bold" font variations) and to combine them into a custom font family ("myRoboto" is used as a font family label).
```js
var fontRobotoThin = "<<base64-encoded string for Roboto-Thin.ttf>>";
var fontRobotoMedium = "<<base64-encoded string for Roboto-Medium.ttf>>";

SurveyPDF.DocController.addFont("myRoboto", fontRobotoThin, "normal");
SurveyPDF.DocController.addFont("myRoboto", fontRobotoMedium, "bold");
```



### Set the document font

As in the 'Change the document font' section above, set the `options.fontName` property to specify the font family used to render all texts in a survey document.  
Set this property to a custom font family identifier which you previously assigned to the loaded font(s) through the `addFont` method's _fontName_ parameter.


```js
function saveSurveyToPdf(filename, surveyModel) {

    var options = {
        // ...
        fontName: 'myRoboto',
    };
    // ...
}
```

### Example

The following example renders a PDF document with four Roboto fonts integrated into the document as a custom font family named 'myRoboto'.

```js
// Integrate base64-encoded representations of custom fonts into a page
var fontRobotoThin = "<<base64-encoded string for Roboto-Thin.ttf>>";
var fontRobotoMedium = "<<base64-encoded string for Roboto-Medium.ttf>>";
var fontRobotLightItalic = "<<base64-encoded string for Roboto-LightItalic.ttf>>";
var fontRobotoBlackItalic = "<<base64-encoded string for Roboto-BlackItalic.ttf>>";

// Embed custom fonts (Roboto font faces) for four font variations:
SurveyPDF.DocController.addFont("myRoboto", fontRobotoThin, "normal");
SurveyPDF.DocController.addFont("myRoboto", fontRobotoMedium, "bold");
SurveyPDF.DocController.addFont("myRoboto", fontRobotoLightItalic, "italic");
SurveyPDF.DocController.addFont("myRoboto", fontRobotoBlackItalic, "bolditalic");

function saveSurveyToPdf(filename, surveyModel) {

    var options = {
        // Specify the font family to use to render a document:
        fontName: 'myRoboto',
    };
    
    var surveyPDF = new SurveyPDF.SurveyPDF(json, options);
    surveyPDF.data = surveyModel.data;
    surveyPDF.save(filename);
}
```

See the example code and test it in action at Plunker:  
[Embed custom fonts to use in SurveyPDF](https://plnkr.co/edit/uyecLKbp1PrZlqtx)



---
<!-- 
Each typeface of a custom font should be defined in base64 encoded format.


Along with use of the standard fonts, PdfDocument also provides the ability to embed custom fonts into document. The following font formats are supported:

.ttf
.ttc
.dfont

First, a custom font must be registered using the registerFont or registerFontAsync method. This method loads font from a URL and associates it with a specified font family name and font attributes (like the style, weight, whether it is a serif or sans serif font, etc). After that the font family name can be used in association with PdfFont class just like any other standard font.

--

Set base64Normal parameter to string with base64 encoded normal font and base64Bold parameter to string with base64 encoded bold font. If only one base64Normal or base64Bold set then it will used for both bold and plain text

method static DocController.addFont()

```js
public static addFont(fontName: string, base64: string, fontStyle: string) 
```

`static addFont(fontName: string, base64: string, fontStyle: string)`

https://github.com/surveyjs/survey-pdf/blob/bcf48693400b31fd2e5c10a778bd8362c830e17b/src/doc_controller.ts#L180


-- from jsPDF --

The 14 standard fonts in PDF are limited to the ASCII-codepage. If you want to use UTF-8 you have to integrate a custom font, which provides the needed glyphs. jsPDF supports .ttf-files. So if you want to have for example Chinese text in your pdf, your font has to have the necessary Chinese glyphs. So, check if your font supports the wanted glyphs or else it will show garbled characters instead of the right text.

To add the font to jsPDF use our fontconverter in /fontconverter/fontconverter.html. The fontconverter will create a js-file with the content of the provided ttf-file as base64 encoded string and additional code for jsPDF. You just have to add this generated js-File to your project. You are then ready to go to use setFont-method in your code and write your UTF-8 encoded text.

Alternatively you can just load the content of the *.ttf file as a binary string using fetch or XMLHttpRequest and add the font to the PDF file:

const doc = new jsPDF();

const myFont = ... // load the *.ttf font file as binary string

// add the font to jsPDF
doc.addFileToVFS("MyFont.ttf", myFont);
doc.addFont("MyFont.ttf", "MyFont", "normal");
doc.setFont("MyFont");


-- from jsPDF -- -->



## Where to find a font for a certain language?

To be able to integrate a custom font into a PDF document, you first need to have a font as a .ttf (a regular TrueType font) file.

You can use online resources to search for and download language- and lettering style specific fonts.

As an example, the following Google services provide convenient ways to find and download fonts.

* [Google Noto Fonts](https://www.google.com/get/noto/)  
The Noto font family - a Google-developed collection of free fonts, which aims to support all languages. 

* [Google Fonts](https://fonts.google.com/)  
A library of more than a thousand free and open source font families.




<!-- 
You may use Google Noto free fonts collection. Just follow the link, type in search bar name of your language, select best for you option in dropdown and click Download button to save archive with .ttf files 
-->

## How to convert a ttf file to a base64 string?

You can use any of the following online tools to convert a .ttf font to a base64 string.

* [jsPDF's Font Converter](https://rawgit.com/MrRio/jsPDF/master/fontconverter/fontconverter.html)  
A font converter developed by authors of the jsPDF library.  
It accepts a .ttf file and creates a .js file that contains the font content as a base64 encoded string and additional jsPDF-specific code.  
To obtain a font's base64 representation, you just need to find and copy the value of the `font` variable (`var font = "..."`) in the downloaded .js file.

* [GiftOfSpeed's File to Base64 Encoder](https://www.giftofspeed.com/base64-encoder/)  
A simplest way to encode web files to a base64 string.  
Upload a .ttf file and copy the generated string.


<!-- 
You may use this tool to convert .ttf font to base64. Just upload file with font, click Create, open downloaded file as text and find follow line:

```js
var font = 'string with base64 ecnoded font, which you can use to pass to SurveyPDF base64Normal or base64Bold parameters';
``` 
-->